<html>

<head>
  <!-- these are for loading everything before the viewer is able to do anything. This results in longer loading times but fully functional activity while they are playing. (the next five lines. Jquery is really cool for other things too, as well as bootstrap, but dont worry too much about those. They are just files that allow the aframe-preloader-component.min.js)
  --><!--
  <script src="js/noback.js"></script>
  <link rel="stylesheet" href="https://cdn.rawgit.com/thomaspark/bootswatch/gh-pages/slate/bootstrap.min.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="https://cdn.rawgit.com/gladeye/aframe-preloader-component/1.0.0/dist/aframe-preloader-component.min.js"></script>
-->
  <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-sharedspace-component@1.0.1/dist/aframe-sharedspace-component.min.js"></script>

  <!--
  <!-- is code for creating comments. - - > without spaces ends the comment. to activate the script below just remove the comment codes below.
  -->
  <!--
  This javascript library below is for particle systems. Is kinda resource heavy though.
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  -->

  <style>
      /*

      in stylesheets /* start comments and * / without comments ends them.
      stylesheets are written in css. css is important for creating the look of HTML. HTML is the content, CSS is the visual side, and Javascript is the functionality.
      css should always be written in here. It is possible to write it inline with other code throughout the HTML, but really bad practice and bad organization. KEEP IT UP HERE!
      To use css use class="classname" (classname being any name you want) in the HTML then to change what you want that element to look like by typing .classname{} inside the curly brackets type different parameters you would like to change. common ones are width, height, position, display, opacity, background-color, background-image, text-align, left, right, and many more. After you decide what you want to change just put a colon and what you want to change it to. Such as... .name{width: 50%;}

      */

      body{
          width: 100%;
          height: 100%;
          overflow: hidden;
          margin: 0px;
          padding: 0px;
      }
      a-scene{
        display: block;
        width: 100%;
        height: 100%;
      }
      .scanned{
          position: fixed;
          display:inline-block;
          width: 200px;
          background-color: white;
          height: 100%;
          left: 0%;
          top: 0px;
          text-align: center;
          transition: left .25s;
      }
      .scannedhidden{
        position: fixed;
        display:inline-block;
        width: 200px;
        background-color: white;
        height: 100%;
        top: 0px;
        left: -200px;
        transition: left .25s;
      }
      .hinthidden{
        position: fixed;
        display: inline-block;
        width: 200px;
        background-color: white;
        height: 100%;
        top: 0px;
        text-align: center;
        right: -200px;
        transition: right .25s;
      }
      .hints{
        position: fixed;
        display: inline-block;
        width: 200px;
        background-color: white;
        height: 100%;
        right: 0px;
        top: 0px;
        text-align: center;
        transition: right .25s;
      }
      .buttonChanger{
        width: 100px;
        height: 100px;
        position: fixed;
        background-image: url("img/Menu.png");
        background-size: 100px 100px;
        background-repeat: no-repeat;
        z-index: 100;
        margin:0px;
        padding: 0px;
        right: 0px;
        bottom: 0px;
        color: white;
        text-align: center;
        font-size: 20px;
      }
      .prize1{
          width: 50px;
          height: 50px;
          margin: 10px;
          background: url(img/Placeholder.png);
          display: inline-block;
          background-size: contain;
      }
      .prize2{
          width: 50px;
          height: 50px;
          margin: 10px;
          background: url(img/fullFloorMap.png);
          display: inline-block;
          background-size: contain;
      }
      .hide{
          display: none;
          transition: all 1s;
      }
      .items{
          display: block;
          width: 100%;
          height: 25px;
      }
      .overlay{
        position: fixed;
        display: inline-block;
        z-index: 50;
        width: 80%;
        height: 80%;
        background-color: rgba(10,10,10,.8);
        color: white;
        left: 10%;
        top: 4%;
        text-align: center;
      }
      .centerDiv{
        width: 80%;
        height: 80%;
        text-align: center;
        position: relative;
        left: 10%;
      }
      .buttonOverlayExit{
        position: relative;
        display: block;
        width: 20%;
        height: 60px;
        font-size: 15px;
        background-color: silver;
        top: 67vh;
      }
      .map1{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap5.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
      .map2{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap_topcenter.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
      .map3{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap_topright.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
      .map4{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap_bottomleft.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
      .map5{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap_bottomcenter.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
      .map6{
        display: inline-block;
        position: relative;
        width: 30%;
        background-image: url('img/papermap_bottomright.png');
        background-size: contain;
        background-repeat: no-repeat;
        height: 40%;
      }
  </style>
</head>

<body>
  <div class="scannedhidden" id="changeThisClass1">
    <div class="items">Things you have found:</div>
    <div class="hide" id="prize1"></div>
    <div class="hide" id="prize2"></div>
  </div>
  <div class="hinthidden" id="changeThisClass2">
    <div class="items">
      Hints:
    </div>
  </div>
  <div class="buttonChanger" id="buttonChanger" onclick="loadMenus();">
  </div>
  <!--
  <div class="hide" id="overlayID">
    <div class="centerDiv">
      You have found something very important...
      Do you know the info you need?
      Put it here if you do...
      <div id="userInput" class="inputBox" contenteditable="true">Input here...</div>
      <button class="buttonOverlayExit" onclick="overlayRemove()">Click to go back to AR</button>
      <button id="buttonid" class="buttonclass" type="button" onclick="myChecker()">
          Submit
      </button>
    </div>
  </div>
  -->
  <div class="hide" id="redeemOverlay">
    <div class="centerDiv">
      Click to arrange the map pieces the way that they should be. <br />
      <div class="map1" id="map1location" onclick="changeimage(this);"></div>
      <div class="map1" id="map2location" onclick="changeimage(this);"></div>
      <div class="map1" id="map3location" onclick="changeimage(this);"></div>
      <div class="map1" id="map4location" onclick="changeimage(this);"></div>
      <div class="map1" id="map5location" onclick="changeimage(this);"></div>
      <div class="map1" id="map6location" onclick="changeimage(this);"></div>
      <div class="mapchecker" id="mapchecker" onclick="mapcheckerfunction();">
        Click here to see if the pattern is correct
      </div>
    </div>
  </div>
  <div class="hide" id="tempContinue">
    <div class="centerDiv">
      This doesnt look pretty right now, but will. Continue Onward using the map!
    </div>
    <div class="mapchecker" id="closer" onclick="closerFunction();">
      click here to close
    </div>
  </div>
  <a-scene vr-mode-ui="enabled: false" preloader embedded sharedspace avatars arjs='debugUIEnabled:false;'>
    <a-assets>
      <!-- map pieces -->
      <img id="mappiece1" src="img/floormap1.png" />
      <img id="mappiece2" src="img/floormap2.png" />
      <img id="mappiece3" src="img/floormap3.png" />
      <img id="mappiece4" src="img/floormap4.png" />
      <img id="mappiece5" src="img/floormap5.png" />
      <img id="mappiece6" src="img/floormap6.png" />
      <!-- word find hot-cold -->
      <img id="hotcold1" src="img/WordClues_1.png" />
      <img id="hotcold2" src="img/WordClues_2.png" />
      <img id="hotcold3" src="img/WordClues_3.png" />
      <img id="hotcold4" src="img/WordClues_4.png" />
      <img id="hotcold5" src="img/WordClues_5.png" />
      <img id="hotcold6" src="img/WordClues_6.png" />
      <img id="hotcold7" src="img/WordClues_7.png" />
      <img id="hotcold8" src="img/WordClues_8.png" />
      <!-- PIVA -->
      <img id="PIVA1" src="img/p.png" />
      <img id="PIVA2" src="img/i.png" />
      <img id="PIVA3" src="img/v.png" />
      <img id="PIVA4" src="img/a.png" />

      <!-- Music Stand -->
      <a-asset-item id="musicStand" src="img/MusicStandRejection.gltf"></a-asset-item>

      <!-- CLUES 2, 0, 1, 0 -->
      <img id="lloyd1" src="img/Number2.png" />
      <img id="lloyd2" src="img/Number0-1.png" />
      <img id="lloyd3" src="img/Number1.jpg" />
      <img id="lloyd4" src="img/Number0-2.png" />

      <!-- Briefcase tag with clue -->
      <img id="briefcaseClue" src="img/YearConstruction.png"/>

      <!-- Concluding words and last goodbye -->
      <img id="ending" src="img/MusicReturn2.png"/>


      <a-asset-item id="unlocked" src="img/lockUnlocked_01.gltf"></a-asset-item>
      <a-asset-item id="locked" src="img/lock.gltf"></a-asset-item>
      <!-- this is what animation files will look like.
      <a-asset-item id="musicStand" src="img/MusicStandRejection.gltf"></a-asset-item>
    -->
    </a-assets>

    <!-- 2010 -->
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/bookTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1.5" src="#lloyd1" material="alphaTest:0.5" shadow></a-image>
    </a-marker>
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/catTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1.5" src="#lloyd2" material="alphaTest:0.5" shadow></a-image>
    </a-marker>
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/cosmoTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1.5" src="#lloyd3" material="alphaTest:0.5" shadow></a-image>
    </a-marker>
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/keyTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1" src="#lloyd4" material="alphaTest:0.5" shadow></a-image>
    </a-marker>

    <!--Year of Construction on the briefcase -->
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/musicstandTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1.5" src="#briefcaseClue" material="alphaTest:0.5" shadow></a-image>
    </a-marker>

    <!-- Music Stand Rejection -->
    <a-marker id="musicStandRejection" preset="pattern" type="pattern" url="markers/treasuremapTarget.patt">
      <a-entity gltf-model="#musicStand" position="0 1 1" rotation="-90 0 0" material="alphaTest:0.5" shadow animation-mixer></a-entity>
      <a-light type="point" color="#FFEA86" position="0 0 -9"></a-light>
    </a-marker>

    <!-- MusicReturn -->
    <a-marker id="image16" preset="pattern" type="pattern" url="markers/typewriterTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1.5" height="1.5" src="#ending" material="alphaTest:0.5" shadow></a-image>
    </a-marker>

    <!--lloyd whiteboard trick -->
    <a-marker id="mapRedeemMarker" preset="pattern" type="pattern" url="markers/diamondStencilTarget.patt">
      <a-image position="0 .25 0" rotation="-90 0 0" width="1" height="1" src="#hotcold3" material="alphaTest:0.5" shadow></a-image>
    </a-marker>




    <!-- markers that dont work that well -->


    <!-- animation files with marker
    <a-marker id="musicStandRejection" preset="pattern" type="pattern" url="lloyd.patt">
      <a-entity gltf-model="#musicStand" position="0 1 1" rotation="-90 0 0" material="alphaTest:0.5" shadow animation-mixer></a-entity>
      <a-light type="point" color="#FFEA86" position="0 0 -9"></a-light>
    </a-marker>
  -->
    <a-entity camera>
      <a-entity cursor="rayOrigin: mouse;"></a-entity>
    </a-entity>
  </a-scene>
  <script>
    var currentUrl = new URL(window.location);
    var roomName = currentUrl.search.substr(1);
    var room = document.querySelector('[sharedspace]');
    var  box1 = document.querySelector('#image1');
    // need music piece when it is done!


    //These lines fix a scrolling problem.
    var fixed = document.getElementById('buttonChanger');
    fixed.addEventListener('touchmove', function(e) {
            e.preventDefault();
    }, false);

/*
    function myChecker(){
      if(document.getElementById("userInput").innerHTML == "hello"){
        document.getElementById("prize1").classList.remove("hide");
        document.getElementById("prize1").classList.add("prize1");
        document.getElementById("buttonid").innerHTML = "Congrats you got it!";
        room.components.sharedspace.send('*',{
          type: 'image1'
        })
      }
    }
*/

    function loadMenus(){
      document.getElementById("changeThisClass1").classList.toggle("scannedhidden");
      document.getElementById("changeThisClass1").classList.toggle("scanned");
      document.getElementById("changeThisClass2").classList.toggle("hinthidden");
      document.getElementById("changeThisClass2").classList.toggle("hints");

    }

    function overlayRemove(){
      document.getElementById("overlayID").classList.remove("overlay");
      document.getElementById("overlayID").classList.add("hide");
    }


     box1.addEventListener("click", function() {
      //document.getElementById('overlayID').classList.remove("hide");
      //document.getElementById('overlayID').classList.add("overlay");
      document.getElementById("prize1").classList.toggle("hide");
      document.getElementById("prize1").classList.toggle("prize1");
      room.components.sharedspace.send('*', {
        type: 'image1'
      })
    });

    /*
    box2.addEventListener("click", function() {
      document.getElementById("prize2").classList.toggle("hide");
      document.getElementById("prize2").classList.toggle("prize2");
      room.components.sharedspace.send('*', {
        type: 'image2'
      })
    });
    */

    room.addEventListener('participantmessage', function(evt) {



      /*
      if (evt.detail.message.type === 'image2') {
        document.getElementById("prize2").classList.toggle("hide");
        document.getElementById("prize2").classList.toggle("prize2");
      }
      */

    });
    room.setAttribute('sharedspace', {
      room: roomName,
      hold: false
    });
  </script>
</body>

</html>
